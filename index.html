<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nossa História</title>
  <style>
    /* ----- ESTILIZAÇÕES GERAIS ----- */
    body {
      font-family: sans-serif;
      margin: 0;
      overflow-x: hidden;
      background-color: #E6E6FA;
      color: #4B0082;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
    }
    header {
      position: relative;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      scroll-snap-align: start;
      overflow: hidden;
    }
    #heart-container {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      overflow: hidden;
      transition: opacity 1s ease-in-out;
      z-index: 0;
    }
    .heart {
      position: absolute;
      top: -10%;
      font-size: 24px;
      color: rgba(255, 0, 0, 0.8);
      animation-name: fall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }
    @keyframes fall {
      0%   { transform: translateY(0);   opacity: 1; }
      70%  { opacity: 1; }
      100% { transform: translateY(110vh); opacity: 0; }
    }

    /* --- Seções --- */
    .secao {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      text-align: center;
      scroll-snap-align: start;
      opacity: 0;
      transition: opacity 1s, transform 1s;
      transform: translateY(50px);
      padding: 20px;
      box-sizing: border-box;
    }
    .secao.active {
      opacity: 1;
      transform: translateY(0);
    }
    .secao:nth-child(odd)  { background: #D8BFD8; }
    .secao:nth-child(even) { background: #DDA0DD; }
    .secao h2 { margin-bottom: 10px; }

    /* Carrossel */
    .carrossel-container {
      position: relative;
      width: 90%;
      max-width: 400px;
      height: 0;
      padding-bottom: 90%;
      margin-bottom: 15px;
      z-index: 1;
    }
    .carrossel-img,
    .carrossel-video {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 1s;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .carrossel-img.active,
    .carrossel-video.active {
      opacity: 1;
      z-index: 2;
    }

    .texto {
      padding: 0 20px;
      max-width: 600px;
      color: #FFF;
      z-index: 1;
    }
    .texto .eu-te-amo {
      font-size: 1.5em;
      font-weight: bold;
      color: #FF69B4;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    #play-fallback {
      position: fixed;
      left: 50%; bottom: 20px;
      transform: translateX(-50%);
      background: rgba(75, 0, 130, 0.3);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 50px; height: 50px;
      font-size: 24px;
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }
  </style>
</head>
<body>

  <audio id="bg-music" src="musica.mp3" loop></audio>
  <button id="play-fallback">▶</button>

  <!-- Cabeçalho com container de corações -->
  <header>
    <h1>Nosso Amor ❤️</h1>
    <p>Uma pequena viagem no tempo</p>
    <div id="heart-container"></div>
  </header>

  <section class="secao" id="ano2022">
    <h2>2022</h2>
    <div class="carrossel-container">
      <img src="img1.jpg" class="carrossel-img" alt="">
      <img src="img2.jpeg" class="carrossel-img" alt="">
      <img src="img3.jpeg" class="carrossel-img" alt="">
      <img src="img5.jpeg" class="carrossel-img" alt="">
      <img src="img6.jpeg" class="carrossel-img" alt="">
      <img src="img7.jpeg" class="carrossel-img" alt="">
      <img src="img8.jpeg" class="carrossel-img" alt="">
    </div>
    <div class="texto">
      <p>Aqui começou nosso primeiro Dia dos Namorados juntinhos, o ano em que descobri o verdadeiro significado de amar e ser amado. 
        A cada encontro de fim de semana e em cada conversa durante a semana, eu me apaixonava ainda mais pela pessoa incrível que você é, oh lindinha...</p>
    </div>
  </section>

  <section class="secao" id="ano2023">
    <h2>2023</h2>
    <div class="carrossel-container">
      <img src="img9.jpeg" class="carrossel-img" alt="">
      <img src="img10.jpeg" class="carrossel-img" alt="">
      <img src="img11.jpeg" class="carrossel-img" alt="">
      <img src="img12.jpeg" class="carrossel-img" alt="">
      <img src="img13.jpeg" class="carrossel-img" alt="">
      <img src="img14.jpeg" class="carrossel-img" alt="">
      <img src="img15.jpeg" class="carrossel-img" alt="">
      <img src="img16.jpeg" class="carrossel-img" alt="">
      <img src="img17.jpeg" class="carrossel-img" alt="">
      <img src="img18.jpeg" class="carrossel-img" alt="">
    </div>
    <div class="texto">
      <p>Nosso amor se fortaleceu ainda mais neste ano. Primeira viagem de avião juntos,
        enfrentamos alguns perrengues com a Doces e comemos muito acarajé, hihi.
        Também demos nosso primeiro grande passo: decidimos que queríamos morar juntinhos. Para mim, foi um misto de sentimentos, 
        olhar items para nossa futura casa, escolher como ela seria e o mais importante, poder dormir dentro toooodos os dias e dar um cheirinho na lindinha tooodos os dias.
        Não podemos esquecer do Manaira que veio num momento crucial !
      </p>
    </div>
  </section>
  
  <section class="secao" id="ano2024">
    <h2>2024</h2>
    <div class="carrossel-container">
      <img src="img19.jpeg" class="carrossel-img" alt="">
      <img src="img20.jpeg" class="carrossel-img" alt="">
      <img src="img21.jpeg" class="carrossel-img" alt="">
      <img src="img22.jpeg" class="carrossel-img" alt="">
      <img src="img23.jpeg" class="carrossel-img" alt="">
      <img src="img24.jpeg" class="carrossel-img" alt="">
      <img src="img25.jpeg" class="carrossel-img" alt="">
      <img src="img26.jpeg" class="carrossel-img" alt="">
      <img src="img27.jpeg" class="carrossel-img" alt="">
      <img src="img28.jpeg" class="carrossel-img" alt="">
      <img src="img29.jpeg" class="carrossel-img" alt="">
    </div>
    <div class="texto">
      <p>Esse ano foi mais caótico né? Aqui o ritmo ficou um pouco mais lento, nos mudamos e começou a correria, compra móvel, instala móvel, arruma vazamento, 
        instala ventilador kkkk. A família aumentou com Lulucy doidinha e teve até gatinha passando mal. Teve o lançamento da música da anjinha lindinha,
        teve até competição de coreografias de artes cênicas ao amanhecer e que vc foi campeã disparada, teve viagem com mta jabuticaba e lindnha beba na banheira.        
        Ainda nesse ano lindinha ficou doida, eu fiquei doido e mesmo assim sobrevivemos, evoluímos um com outro e meu amor cresceu ainda mais por você.  </p>
    </div>
  </section>

    <section class="secao" id="ano2025">
    <h2>2025</h2>
    <div class="carrossel-container">
      <img src="img30.jpeg" class="carrossel-img" alt="">
      <img src="img31.jpeg" class="carrossel-img" alt="">
      <img src="img32.jpeg" class="carrossel-img" alt="">
      <img src="img33.jpeg" class="carrossel-img" alt="">
      <img src="img34.jpeg" class="carrossel-img" alt="">
      <video src="video1.mp4"
             class="carrossel-video"
             autoplay
             loop
             muted
             playsinline
             webkit-playsinline>
      </video>
    </div>
    <div class="texto">
      <p>Este ano começou com mais dias de luta do que de glória, não é? Mas, por um lado, isso não é ruim. Vejo a gente evoluindo e amadurecendo como um casal ao superarmos juntos esses momentos difíceis.
        Eu amo o nosso jeito de ser, cada detalhe que vivemos, cada momento "besta", desde assistir a uma série no sofá até cantar "uuuhuuuu uuuu uuu" com seu dó maior no shopping. 
        Amo o jeito que estamos evoluindo juntos e a ideia que temos de um futuro (RICOS!). Eu amo como a gente incentiva um ao outro, até começamos a academia juntos hihihi, eu amo nosso companherimos.
        Mesmo com gostos diferentes (você, conhecedora de todas as músicas, e eu, de todos os games) e tempos de execução diferentes, a gente se encontra e se entende. 
        Sempre que rezo, peço para Deus abençoar nós dois juntinhos, para podermos crescer e conquistar nossos sonhos juntos!
        Obrigado por você ser a namorada mais perfeita que alguém poderia ter, obrigado por tolerar minhas lerdisses, obrigado por me deixar ser seu anjinho.
        <span class="eu-te-amo">Eu te AMO</span>
      </p>    
    </div>
  </section>
<script>
  // 1) Gera os corações no header
  function initHearts() {
    const container = document.getElementById('heart-container');
    const numHearts = 25;
    for (let i = 0; i < numHearts; i++) {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.textContent = '❤️';
      heart.style.left = Math.random() * 100 + '%';
      heart.style.animationDuration = 4 + Math.random() * 3 + 's';
      heart.style.animationDelay = Math.random() * 5 + 's';
      container.appendChild(heart);
    }
  }
  initHearts();

  // 2) Música de fundo + fallback de play
  const bgMusic      = document.getElementById('bg-music');
  const playFallback = document.getElementById('play-fallback');
  window.addEventListener('load', () => {
    bgMusic.play().catch(() => playFallback.style.display = 'flex');
  });
  playFallback.addEventListener('click', () => {
    bgMusic.play();
    playFallback.style.display = 'none';
  });

  // 3) Scroll: ativa seções e esconde corações
  const headerElt      = document.querySelector('header');
  const heartContainer = document.getElementById('heart-container');
  const sections       = document.querySelectorAll('.secao');

  function handleScroll() {
    // 3.1 esconde os corações quando o header sair de vista
    const headerRect = headerElt.getBoundingClientRect();
    heartContainer.style.opacity = headerRect.bottom < 50 ? '0' : '1';

    // 3.2 ativa animação das seções
    sections.forEach(sec => {
      const top = sec.getBoundingClientRect().top;
      sec.classList.toggle('active', top < window.innerHeight * 0.75);
    });
  }
  window.addEventListener('scroll', handleScroll);
  window.addEventListener('load', handleScroll);

  // 4) Carrossel (imagens + vídeo com controle de áudio e fluxo)
  document.querySelectorAll('.carrossel-container').forEach(container => {
    const items = Array.from(container.querySelectorAll('.carrossel-img, .carrossel-video'));
    let idx = 0;

    function showSlide(i) {
      // 4.1 exibe o slide i e oculta os demais
      items.forEach((item, j) => item.classList.toggle('active', j === i));
      const current = items[i];

      if (current.tagName.toLowerCase() === 'video') {
        // 4.2 slide de vídeo: pausa música, destrava áudio e toca
        bgMusic.pause();
        current.muted = false;
        current.currentTime = 0;
        current.play().catch(() => {/* possivelmente bloqueado até interação */});

        // 4.3 ao terminar, silencia vídeo, retoma a música e avança
        function onEnded() {
          current.removeEventListener('ended', onEnded);
          current.muted = true;
          bgMusic.play().catch(() => {});
          const next = (i + 1) % items.length;
          showSlide(next);
        }
        current.addEventListener('ended', onEnded);

      } else {
        // 4.4 slide de imagem: mantém 3s e avança
        setTimeout(() => {
          if (items[idx] === current) {
            const next = (i + 1) % items.length;
            showSlide(next);
          }
        }, 3000);
      }

      idx = i;
    }

    showSlide(0);
  });

</script>
  
</body>
</html>
